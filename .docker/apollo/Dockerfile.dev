FROM node:12.15.0-alpine

RUN apk add --update --no-cache \
    python \
    make \
    g++


RUN mkdir -p /usr/app/  && chown -R node:node /usr/app
WORKDIR /usr/app
COPY  --chown=node:node ./ ./
COPY  --chown=node:node ./.env ./.env
COPY --chown=node:node ./package*.json ./

RUN npm install 
RUN npm install nodemon -g --save

EXPOSE 3001
USER node
ENV NODE_ENV development


CMD ["npm", "start"]
